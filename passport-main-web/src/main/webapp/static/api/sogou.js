var hexcase=0;var chrsz=8;var MIN_HTTS_TIMESTAMP=1293156753137;var utils={b64_423:function(c){var d=new Array("A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","-","_");var b=new String();for(var e=0;e<c.length;e++){for(var a=0;a<64;a++){if(c.charAt(e)==d[a]){var f=a.toString(2);b+=("000000"+f).substr(f.length);break}}if(a==64){if(e==2){return b.substr(0,8)}else{return b.substr(0,16)}}}return b},b2i:function(b){var a=0;var d=128;for(var c=0;c<8;c++,d=d/2){if(b.charAt(c)=="1"){a+=d}}return String.fromCharCode(a)},b64_decodex:function(b){var d=new Array();var c;var a="";for(c=0;c<b.length;c+=4){a+=utils.b64_423(b.substr(c,4))}for(c=0;c<a.length;c+=8){d+=utils.b2i(a.substr(c,8))}return d},utf8to16:function(f){var a,j,k,h,g,b,c,d,e;a=[];h=f.length;j=k=0;while(j<h){g=f.charCodeAt(j++);switch(g>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a[k++]=f.charAt(j-1);break;case 12:case 13:b=f.charCodeAt(j++);a[k++]=String.fromCharCode(((g&31)<<6)|(b&63));break;case 14:b=f.charCodeAt(j++);c=f.charCodeAt(j++);a[k++]=String.fromCharCode(((g&15)<<12)|((b&63)<<6)|(c&63));break;case 15:switch(g&15){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:b=f.charCodeAt(j++);c=f.charCodeAt(j++);d=f.charCodeAt(j++);e=((g&7)<<18)|((b&63)<<12)|((c&63)<<6)|(d&63)-65536;if(0<=e&&e<=1048575){a[k]=String.fromCharCode(((e>>>10)&1023)|55296,(e&1023)|56320)}else{a[k]="?"}break;case 8:case 9:case 10:case 11:j+=4;a[k]="?";break;case 12:case 13:j+=5;a[k]="?";break}}k++}return a.join("")},tmpl:function(c,b){var a=new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+c.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return b?a(b):a},addIframe:function(c,b,d){var a=document.createElement("iframe");a.style.height="1px";a.style.width="1px";a.style.visibility="hidden";a.src=b;if(a.attachEvent){a.attachEvent("onload",function(){d&&d()})}else{a.onload=function(){d&&d()}}c.appendChild(a)},uuid:function(){function a(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return a()+a()+a()+a()+a()+a()+a()+a()}};function hex_md5(a){return binl2hex(core_md5(str2binl(a),a.length*chrsz))}function core_md5(e,k){e[k>>5]|=128<<((k)%32);e[(((k+64)>>>9)<<4)+14]=k;var f=1732584193;var g=-271733879;var h=-1732584194;var j=271733878;for(var b=0;b<e.length;b+=16){var l=f;var a=g;var c=h;var d=j;f=md5_ff(f,g,h,j,e[b+0],7,-680876936);j=md5_ff(j,f,g,h,e[b+1],12,-389564586);h=md5_ff(h,j,f,g,e[b+2],17,606105819);g=md5_ff(g,h,j,f,e[b+3],22,-1044525330);f=md5_ff(f,g,h,j,e[b+4],7,-176418897);j=md5_ff(j,f,g,h,e[b+5],12,1200080426);h=md5_ff(h,j,f,g,e[b+6],17,-1473231341);g=md5_ff(g,h,j,f,e[b+7],22,-45705983);f=md5_ff(f,g,h,j,e[b+8],7,1770035416);j=md5_ff(j,f,g,h,e[b+9],12,-1958414417);h=md5_ff(h,j,f,g,e[b+10],17,-42063);g=md5_ff(g,h,j,f,e[b+11],22,-1990404162);f=md5_ff(f,g,h,j,e[b+12],7,1804603682);j=md5_ff(j,f,g,h,e[b+13],12,-40341101);h=md5_ff(h,j,f,g,e[b+14],17,-1502002290);g=md5_ff(g,h,j,f,e[b+15],22,1236535329);f=md5_gg(f,g,h,j,e[b+1],5,-165796510);j=md5_gg(j,f,g,h,e[b+6],9,-1069501632);h=md5_gg(h,j,f,g,e[b+11],14,643717713);g=md5_gg(g,h,j,f,e[b+0],20,-373897302);f=md5_gg(f,g,h,j,e[b+5],5,-701558691);j=md5_gg(j,f,g,h,e[b+10],9,38016083);h=md5_gg(h,j,f,g,e[b+15],14,-660478335);g=md5_gg(g,h,j,f,e[b+4],20,-405537848);f=md5_gg(f,g,h,j,e[b+9],5,568446438);j=md5_gg(j,f,g,h,e[b+14],9,-1019803690);h=md5_gg(h,j,f,g,e[b+3],14,-187363961);g=md5_gg(g,h,j,f,e[b+8],20,1163531501);f=md5_gg(f,g,h,j,e[b+13],5,-1444681467);j=md5_gg(j,f,g,h,e[b+2],9,-51403784);h=md5_gg(h,j,f,g,e[b+7],14,1735328473);g=md5_gg(g,h,j,f,e[b+12],20,-1926607734);f=md5_hh(f,g,h,j,e[b+5],4,-378558);j=md5_hh(j,f,g,h,e[b+8],11,-2022574463);h=md5_hh(h,j,f,g,e[b+11],16,1839030562);g=md5_hh(g,h,j,f,e[b+14],23,-35309556);f=md5_hh(f,g,h,j,e[b+1],4,-1530992060);j=md5_hh(j,f,g,h,e[b+4],11,1272893353);h=md5_hh(h,j,f,g,e[b+7],16,-155497632);g=md5_hh(g,h,j,f,e[b+10],23,-1094730640);f=md5_hh(f,g,h,j,e[b+13],4,681279174);j=md5_hh(j,f,g,h,e[b+0],11,-358537222);h=md5_hh(h,j,f,g,e[b+3],16,-722521979);g=md5_hh(g,h,j,f,e[b+6],23,76029189);f=md5_hh(f,g,h,j,e[b+9],4,-640364487);j=md5_hh(j,f,g,h,e[b+12],11,-421815835);h=md5_hh(h,j,f,g,e[b+15],16,530742520);g=md5_hh(g,h,j,f,e[b+2],23,-995338651);f=md5_ii(f,g,h,j,e[b+0],6,-198630844);j=md5_ii(j,f,g,h,e[b+7],10,1126891415);h=md5_ii(h,j,f,g,e[b+14],15,-1416354905);g=md5_ii(g,h,j,f,e[b+5],21,-57434055);f=md5_ii(f,g,h,j,e[b+12],6,1700485571);j=md5_ii(j,f,g,h,e[b+3],10,-1894986606);h=md5_ii(h,j,f,g,e[b+10],15,-1051523);g=md5_ii(g,h,j,f,e[b+1],21,-2054922799);f=md5_ii(f,g,h,j,e[b+8],6,1873313359);j=md5_ii(j,f,g,h,e[b+15],10,-30611744);h=md5_ii(h,j,f,g,e[b+6],15,-1560198380);g=md5_ii(g,h,j,f,e[b+13],21,1309151649);f=md5_ii(f,g,h,j,e[b+4],6,-145523070);j=md5_ii(j,f,g,h,e[b+11],10,-1120210379);h=md5_ii(h,j,f,g,e[b+2],15,718787259);g=md5_ii(g,h,j,f,e[b+9],21,-343485551);f=safe_add(f,l);g=safe_add(g,a);h=safe_add(h,c);j=safe_add(j,d)}return Array(f,g,h,j)}function md5_cmn(b,e,f,a,c,d){return safe_add(bit_rol(safe_add(safe_add(e,b),safe_add(a,d)),c),f)}function md5_ff(f,g,b,c,a,d,e){return md5_cmn((g&b)|((~g)&c),f,g,a,d,e)}function md5_gg(f,g,b,c,a,d,e){return md5_cmn((g&c)|(b&(~c)),f,g,a,d,e)}function md5_hh(f,g,b,c,a,d,e){return md5_cmn(g^b^c,f,g,a,d,e)}function md5_ii(f,g,b,c,a,d,e){return md5_cmn(b^(g|(~c)),f,g,a,d,e)}function safe_add(a,b){var c=(a&65535)+(b&65535);var d=(a>>16)+(b>>16)+(c>>16);return(d<<16)|(c&65535)}function bit_rol(a,b){return(a<<b)|(a>>>(32-b))}function binl2hex(c){var d=hexcase?"0123456789ABCDEF":"0123456789abcdef";var b="";for(var a=0;a<c.length*4;a++){b+=d.charAt((c[a>>2]>>((a%4)*8+4))&15)+d.charAt((c[a>>2]>>((a%4)*8))&15)}return b}function str2binl(b){var c=Array();var a=(1<<chrsz)-1;for(var d=0;d<b.length*chrsz;d+=chrsz){c[d>>5]|=(b.charCodeAt(d/chrsz)&a)<<(d%32)}return c}function b64_423(c){var d=new Array("A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","-","_");var b=new String();for(var e=0;e<c.length;e++){for(var a=0;a<64;a++){if(c.charAt(e)==d[a]){var f=a.toString(2);b+=("000000"+f).substr(f.length);break}}if(a==64){if(e==2){return b.substr(0,8)}else{return b.substr(0,16)}}}return b}function b2i(b){var a=0;var d=128;for(var c=0;c<8;c++,d=d/2){if(b.charAt(c)=="1"){a+=d}}return String.fromCharCode(a)}function b64_decodex(b){var d=new Array();var c;var a="";for(c=0;c<b.length;c+=4){a+=b64_423(b.substr(c,4))}for(c=0;c<a.length;c+=8){d+=b2i(a.substr(c,8))}return d}function utf8to16(f){var a,j,k,h,g,b,c,d,e;a=[];h=f.length;j=k=0;while(j<h){g=f.charCodeAt(j++);switch(g>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a[k++]=f.charAt(j-1);break;case 12:case 13:b=f.charCodeAt(j++);a[k++]=String.fromCharCode(((g&31)<<6)|(b&63));break;case 14:b=f.charCodeAt(j++);c=f.charCodeAt(j++);a[k++]=String.fromCharCode(((g&15)<<12)|((b&63)<<6)|(c&63));break;case 15:switch(g&15){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:b=f.charCodeAt(j++);c=f.charCodeAt(j++);d=f.charCodeAt(j++);e=((g&7)<<18)|((b&63)<<12)|((c&63)<<6)|(d&63)-65536;if(0<=e&&e<=1048575){a[k]=String.fromCharCode(((e>>>10)&1023)|55296,(e&1023)|56320)}else{a[k]="?"}break;case 8:case 9:case 10:case 11:j+=4;a[k]="?";break;case 12:case 13:j+=5;a[k]="?";break}}k++}return a.join("")}function getStringLen(b){var a=b.match(/[^\x00-\xff]/ig);return b.length+(a==null?0:a.length)}function getBrowserType(){var a=0;if(window.ActiveXObject){if(window.XMLHttpRequest&&!window.XDomainRequest){return 5}else{if(window.XDomainRequest){return 6}else{return 1}}}else{if(typeof(Components)=="object"){a=2}else{if(typeof(window.opera)=="object"){a=3}else{if(window.MessageEvent&&!document.getBoxObjectFor){a=7}else{if(navigator.appVersion.indexOf("Safari")>=0){a=4}}}}}return a}function checkCookieEnabled(){try{if(navigator.cookieEnabled==false){return false}}catch(a){}return true}Function.prototype.bindFunc=function(b){if(typeof(b)!="object"){return false}var a=this;return function(){return a.apply(b,arguments)}};var login_status="";var logout_status="";var renew_status="";var PassportCardList=[];var PassportSC={_authConfig:{size:{renren:[880,620],sina:[780,640],qq:[500,300]}},token:utils.uuid(),_passhtml:'<form method="post" action="https://account.sogou.com/web/login" target="_PassportIframe"><input type="hidden" name="username" value="<%=username%>"><input type="hidden" name="password" value="<%=password%>"><input type="hidden" name="captcha" value="<%=vcode%>"><input type="hidden" name="autoLogin" value="<%=isAutoLogin%>"><input type="hidden" name="client_id" value="<%=appid%>"><input type="hidden" name="xd" value="<%=redirectUrl%>"><input type="hidden" name="token" value="<%=token%>"></form><iframe id="_PassportIframe" name="_PassportIframe" src="about:blank" style="width：1px;height:1px;position:absolute;left:-1000px;"></iframe>',version:26,cvsid:"$Id: pp18030.js,v 1.78 2009/10/26 08:22:26 jiangyan Exp $",appid:9999,max_line_length:30,domain:"",cookie:false,email:"",bindDomainSelector:true,autopad:"",autoRedirectUrl:"",loginRedirectUrl:"",logoutRedirectUrl:"",selectorTitle:"请选择您的用户帐号类型",registerUrl:"http://passport.sohu.com/web/signup.jsp",recoverUrl:"http://passport.sohu.com/web/recover.jsp",postru:"",emailPostfix:false,curDSindex:-1,usePost:0,successCalledFunc:false,curCardIndex:0,oElement:false,rootElement:false,dsElement:false,sElement:false,cElement:false,dsAnchor:false,emailInput:false,passwdInput:false,pcInput:false,loginMsg:false,iElement:false,isSetFocus:true,loginProtocal:"https",http_url:false,eInterval:false,maxIntervalCount:70,intervalCount:0,defualtRemPwd:"",isShowRemPwdMsg:0,campImg:"http://js.sohu.com/passport/images/pic007.gif",campImgAlt:"大本营",campUrl:"http://blog.sohu.com/camp?from=",cardTitle:"上搜狐，知天下",firstDomain:"",defaultApp:"",domainPool:["chinaren.com","sogou.com"],domainList:["sohu.com","chinaren.com","sogou.com","vip.sohu.com","17173.com","focus.cn","game.sohu.com","37wanwan.com"],appList:{"1062":"bai","1073":"t","1000":"mail","1005":"alumni","10050":"chinaren","1019":"blog","1017":"pp","1001":"club","1038":"crclub","1039":"group","1021":"music","1010":"say","1042":"cbbs","1028":"focus","1029":"17173","1013":"vip","1035":"rpggame","1044":"pinyin","1022":"relaxgame"},appName:{bai:"白社会",t:"微博",mail:"邮件",alumni:"校友录",chinaren:"ChinaRen",blog:"博客",pp:"相册",club:"搜狐社区",crclub:"CR社区",group:"群组",music:"音乐盒",say:"说吧",cbbs:"校友论坛",focus:"焦点房产","17173":"游戏论坛",vip:"vip邮箱",rpggame:"RPG游戏",pinyin:"输入法",relaxgame:"休闲游戏"},appUrl:{bai:"http://bai.sohu.com",t:"http://t.sohu.com",mail:"",alumni:"http://class.chinaren.com",chinaren:"",blog:"http://blog.sohu.com/",pp:"http://pp.sohu.com/",club:"http://club.sohu.com",crclub:"http://club.chinaren.com",group:"http://i.chinaren.com/group",say:"http://s.sogou.com",music:"http://mbox.sogou.com/",cbbs:"http://cbbs.chinaren.com",focus:"http://www.focus.cn","17173":"http://bbs.17173.com",vip:"http://vip.sohu.com",rpggame:"http://game.sohu.com",pinyin:"http://pinyin.sogou.com",relaxgame:"http://game.sohu.com/index2.htm"},appPool:false,bottomRow:[],recomServ:[],reverseFirstDomain:false,showEmailInputTip:true,usePostFix:true,_logincb:function(a){if(!+a.status){PassportSC.onsuccess&&PassportSC.onsuccess(a);PassportSC.loginSuccessCall()}else{if(+a.status==20231){location.href="https://account.sogou.com/web/remindActivate?email="+encodeURIComponent(PassportSC._currentUname)+"&client_id="+PassportSC.appid+"&ru="+encodeURIComponent(location.href)}else{PassportSC.onfailure&&PassportSC.onfailure(a);PassportSC.loginFailCall()}}},getToken:function(){return PassportSC._token},_checkCommon:function(a){if(!PassportSC.redirectUrl&&!a){window.console&&console.log("Must specify redirect url.Exit!");return}if(!PassportSC.appid){window.console&&console.log("Must specify appid.Exit!");return}return true},gotohref:function(b){var a=document.createElement("a");if(getBrowserType()==1){a.setAttribute("href",b);document.body.appendChild(a);a.click()}else{window.location=b;return}},getDomain:function(){var b=document.domain.split(".");var a=b.length;if(a<=2){return document.domain}return b[a-2]+"."+b[a-1]},getPassportDomain:function(){var a="passport."+this.domain;if(this.domain==""){this.domain=this.getDomain()}if(this.domain in {"focus.cn":"","17173.com":"","37wanwan.com":"","51f.com":""}){a="pass."+this.domain}return a},addCookie:function(e,c,b){if(this.domain==""){this.domain=this.getDomain()}var d=e+"="+escape(c)+"; path=/; domain=."+this.domain+";";if(b>0){var a=new Date();a.setTime(a.getTime()+b*3600*1000);d=d+"expires="+a.toGMTString()+";"}document.cookie=d},getCookie:function(a){var b=document.cookie;var d=document.cookie.split("; ");var c=a+"=";for(var e=0;e<d.length;e++){if(d[e].indexOf(c)==0){return d[e].substr(c.length)}}return""},deleteCookie:function(a){if(this.domain==""){this.domain=this.getDomain()}var b=new Date();b.setTime(b.getTime()-100000);var c=this.getCookie(a);document.cookie=a+"="+c+"; expires="+b.toGMTString()+"; path=/; domain=."+this.domain+";"},preventEvent:function(a){a.cancelBubble=true;a.returnValue=false;if(a.preventDefault){a.preventDefault()}if(a.stopPropagation){a.stopPropagation()}},getPosition:function(c,a){var b=0;while(c){b+=c[a];c=c.offsetParent}return b},getTime:function(){var a=new Date();return a.getTime()},strip:function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")},reportMsg:function(c){var b="";switch(c){case"1":b+="请输入通行证用户名";break;case"2":b+="通行证用户名为邮件地址格式";break;case"3":b+="用户名后缀必须为"+arguments[1];break;case"4":b+="请输入通行证密码";break;case"5":var a=this.strip(this.emailInput.value);if(a.lastIndexOf("@focus.cn")>0){b+="用户名或密码错误!咨询电话:010-58511234"}else{b+="用户名或密码错误"}break;case"6":b+="登录超时，请稍后重试";break;case"7":b+="登录失败，请重试";break;case"8":b+="网络故障，退出失败，请重新退出";break;case"9":b+="登录失败，请稍后重试";break;case"10":b+="暂时不可登录，请稍后重试";break;case"11":b+="浏览器设置有误，请查看帮助修正";break;case"12":b+="服务器故障，请稍候再试";break;default:b+="登录错误，请稍后重试"}this.showMsg(b)},showMsg:function(a){if(!this.loginMsg){return}this.loginMsg.innerHTML=a},cookieHandle:function(){if(!this.cookie){this.parsePassportCookie()}if(this.cookie&&this.cookie.userid!=""){return this.cookie.userid}else{return""}},relationHandle:function(){if(!this.cookie){this.parsePassportCookie()}return this._parserRelation()},_parserRelation:function(){var f=this.cookie.relation;if(f!=null&&f.length>0){var a=f.split(";");for(var b=0;b<a.length;b++){var d=a[b].split(",");var c=d[2].split("#");for(var e=0;e<c.length;e++){if(PassportSC.appid==c[e]){return d[0]}}}}return""},getDisplayName:function(){var d=this.cookieHandle();var a=d.split("@");var b=a[0];var c=/^1\d{10}$/;if(c.test(b)){return b.substring(0,3)+"****"+b.substring(7)}else{return d}},parsePassportCookie:function(){var c=document.cookie.split("; ");for(var d=0;d<c.length;d++){if(c[d].indexOf("ppinf=")==0){var e=c[d].substr(6);break}if(c[d].indexOf("ppinfo=")==0){var e=c[d].substr(7);break}if(c[d].indexOf("passport=")==0){var e=c[d].substr(9);break}}if(d==c.length){this.cookie=false;return}try{var a=unescape(e).split("|");if(a[0]=="1"||a[0]=="2"){var f=utf8to16(b64_decodex(a[3]));this._parsePassportCookie(f);return}}catch(b){}},_parsePassportCookie:function(j){var e;var b;var a;this.cookie=new Object;e=0;b=j.indexOf(":",e);while(b!=-1){var c;var d;var f;c=j.substring(e,b);lenEnd_offset=j.indexOf(":",b+1);if(lenEnd_offset==-1){break}d=parseInt(j.substring(b+1,lenEnd_offset));f=j.substr(lenEnd_offset+1,d);if(j.charAt(lenEnd_offset+1+d)!="|"){break}this.cookie[c]=f;e=lenEnd_offset+2+d;b=j.indexOf(":",e)}relation_userid=this._parserRelation();if(relation_userid!=null&&relation_userid.length>0){this.cookie[c]=relation_userid}try{this.cookie.service=new Object;var g=this.cookie.service;g.mail=0;g.alumni=0;g.chinaren=0;g.blog=0;g.pp=0;g.club=0;g.crclub=0;g.group=0;g.say=0;g.music=0;g.focus=0;g["17173"]=0;g.vip=0;g.rpggame=0;g.pinyin=0;g.relaxgame=0;var h=this.cookie.serviceuse;if(h.charAt(0)==1){g.mail="sohu"}else{if(h.charAt(2)==1){g.mail="sogou"}else{if(this.cookie.userid.indexOf("@chinaren.com")>0){g.mail="chinaren"}}}if(h.charAt(1)==1){g.alumni=1}if(h.charAt(3)==1){g.blog=1}if(h.charAt(4)==1){g.pp=1}if(h.charAt(5)==1){g.club=1}if(h.charAt(7)==1){g.crclub=1}if(h.charAt(8)==1){g.group=1}if(h.charAt(10)==1){g.music=1}if(h.charAt(11)==1||this.cookie.userid.lastIndexOf("@focus.cn")>0){g.focus=1}if(h.charAt(12)==1||this.cookie.userid.indexOf("@17173.com")>0){g["17173"]=1}if(h.charAt(13)==1){g.vip=1}if(h.charAt(14)==1){g.rpggame=1}if(h.charAt(15)==1){g.pinyin=1}if(h.charAt(16)==1){g.relaxgame=1}}catch(k){}},parseAppid:function(){var b=this.appid.toString();var c=0;this.appPool=new Array();for(var d in this.appList){var a=this.appList[d];if(typeof(a)!="string"){continue}if(d==b){this.defaultApp=this.appName[a]}else{if(d=="1028"){this.appPool[c]={app:"focus",name:"北京业主论坛",url:"http://house.focus.cn/group/yezhu.php"};c++;this.appPool[c]={app:"focus",name:"装修论坛",url:"http://home.focus.cn/group/group_forum.php"}}else{this.appPool[c]={app:a,name:this.appName[a],url:this.appUrl[a]}}c++}}},getBottomRow:function(){var a=0;var b=this.max_line_length-getStringLen(this.defaultApp);this.bottomRow[0]=new Array();this.bottomRow[1]=new Array();if(!this.cookie){return}a=this._getBottomRow(this.bottomRow[0],b,0);b=this.max_line_length;a=this._getBottomRow(this.bottomRow[1],b,a)},_getBottomRow:function(e,j,b){var d,a;var g=this.cookie.service;var h=this.appPool;var k=b;var f;for(a=0;k<h.length;k++){d=h[k]["app"];if(typeof(d)!="string"){continue}if(k==0||k==1){f=getStringLen(h[k]["name"]);if(j-f<0){break}j-=(f+2);e[a]=h[k];a++;continue}if(typeof(g[d])=="undefined"){continue}if(g[d]!=0){f=getStringLen(h[k]["name"]);if(j-f<0){break}j-=(f+2);e[a]=h[k];if(d=="mail"){if(g.mail=="sohu"){e[a]["url"]="http://mail.sohu.com?appid=0001"}else{if(g.mail=="sogou"){e[a]["url"]="http://mail.sogou.com"}else{e[a]["url"]="http://mail.chinaren.com"}}}a++}else{if(h[k]["name"]=="ChinaRen"){continue}var c=this.recomServ.length;this.recomServ[c]=h[k];if(d=="mail"){this.recomServ[c]["url"]="http://mail.chinaren.com"}}}return k},parseLastDomain:function(j){this.emailPostfix=new Array();var c="",f="";var d="",e="",l=[];var g=document.cookie.split("; ");for(var n=0;n<g.length;n++){if(g[n].indexOf("lastdomain=")==0){try{l=unescape(g[n].substr(11)).split("|");if(l.length==4){var a=l[3];if(a!=null&&a=="1"){this.loginProtocal="http"}}}catch(k){}break}}var b=0;if(l.length>=3){var h=utf8to16(b64_decodex(l[1]));var m=h.split("|");for(var n=0;n<m.length;n++){if(m[n]!=""){this.emailPostfix[b]=m[n];b++}}}if(this.firstDomain!=""){for(var n in j){if(this.firstDomain==j[n]){f=j[n];break}}if(f!=""){this.emailPostfix[b]=f;b++}}if(document.domain.indexOf("game.sohu.com")>=0){c="game.sohu.com";this.emailPostfix[b]=c;b++}this.emailPostfix[b]=this.domain;b++;for(var n in j){if(typeof(j[n])!="string"){continue}if(j[n]!=this.domain&&j[n]!=c&&j[n]!=f){this.emailPostfix[b]=j[n];b++}}},doPost:function(){for(var b=0;b<document.forms.length;b++){if(document.forms[b].name=="loginform"){break}}if(b==document.forms.length){document.location.href="http://passport.sohu.com";return false}var a=getBrowserType();var c=screen.width;document.forms[b].action="http://passport.sohu.com/sso/login_js.jsp?appid="+this.appid+"&ru="+this.postru+"&b="+a+"&w="+c+"&v="+this.version;document.forms[b].submit();return false},doLogin:function(){if(this.eInterval){return}if(arguments[0]){PassportCardList[index].doLogin()}login_status="";this.intervalCount=0;this.sElement.innerHTML="";this.email=this.strip(this.emailInput.value);var c=this.email;var d=this.strip(this.passwdInput.value);var a=0;if(this.pcInput.checked==true){a=1}if(c==""){this.reportMsg("1");this.emailInput.focus();return false}if(this.autopad!=""){var b=c.substr(c.lastIndexOf("@")+1);if(this.autopad.lastIndexOf(b)<0){this.reportMsg("3",this.autopad);this.emailInput.focus();this.passwdInput.value="";return false}}if(d==""){this.reportMsg("4");this.passwdInput.value="";this.passwdInput.focus();return false}if(this.usePost==1){return this.doPost()}this.drawPassportWait("正在登录搜狐通行证，请稍候...");return this.loginHandle(c,d,a,this.sElement,this.loginFailCall.bindFunc(this),this.loginSuccessCall.bindFunc(this))},loginHandle:function(f,c,g,e,d,b,a){if(arguments.length<7){a=b;b=d;d=e;e=g;g=""}if(!PassportSC._checkCommon()){return false}if(!d){return false}PassportSC._currentUname=f;PassportSC.onsuccess=a,PassportSC.onfailure=b;d.innerHTML=utils.tmpl(PassportSC._passhtml,{username:f,password:c,vcode:g,isAutoLogin:e,appid:PassportSC.appid,redirectUrl:PassportSC.redirectUrl,token:PassportSC._token});d.getElementsByTagName("form")[0].submit();return false},logoutHandle:function(d,b,a){if(!d){return}if(!PassportSC._checkCommon(true)){return}var c="https://account.sogou.com/web/logout_js?client_id="+PassportSC.appid;utils.addIframe(d,c,function(){a&&a()})},_parseCookie:function(){var b=document.cookie.split("; ");var e;for(var c=0,a=b.length;c<a;c++){if(b[c].indexOf("ppinf=")==0){e=b[c].substr(6);break}if(b[c].indexOf("ppinfo=")==0){e=b[c].substr(7);break}if(b[c].indexOf("passport=")==0){e=b[c].substr(9);break}}if(!e){this.cookie=false;return}try{e=unescape(e).split("|");if(e[0]=="1"||e[0]=="2"){e=utils.utf8to16(utils.b64_decodex(e[3]));this._parsePassportCookie(e);return}}catch(d){}},cookieHandle:function(){this._parseCookie();if(this.cookie&&this.cookie.userid!=""){return this.cookie.userid}else{return""}},authHandle:function(h,g,c,b){if(!PassportSC._checkCommon()){return}if(!h){window.console&&console.log("Must specify provider.Exit!");return}g=g||"page";if(g=="page"&&(typeof c=="function"||typeof b=="function")){window.console&&console.log("When display is page, onfailure & onsuccess must be url.Exit!");return}var a=g=="popup"?PassportSC.redirectUrl:(b||location.href);var e="http://account.sogou.com/connect/login?client_id="+PassportSC.appid+"&provider="+h+"&ru="+encodeURIComponent(a);if(g=="popup"){var d=PassportSC._authConfig.size[h];var f=(window.screen.availWidth-d[0])/2;window.open(e,"OPEN_LOGIN","height="+d[1]+",width="+d[0]+",top=80,left="+f+",toolbar=no,menubar=no")}else{if(g=="page"){location.href=e}}},loginFailCall:function(){this.sElement.innerHTML="";this.drawLoginForm();if(this.intervalCount>=this.maxIntervalCount){this.reportMsg("6");this.emailInput.focus()}else{if(login_status=="error3"||login_status=="error2"){this.reportMsg("5");this.passwdInput.focus()}else{if(login_status=="error5"){this.reportMsg("10");this.passwdInput.focus()}else{if(login_status=="error13"){window.location="http://passport.sohu.com/web/remind_activate.jsp";return}else{if(login_status=="error11"){this.reportMsg("12");this.passwdInput.focus()}else{if(checkCookieEnabled()==false){this.reportMsg("11");this.emailInput.focus()}else{this.reportMsg("9");this.passwdInput.focus()}}}}}}},loginSuccessCall:function(){this.parsePassportCookie();if(this.cookie&&this.cookie.userid!=""){this.email="";if(this.loginRedirectUrl!=""){if(this.cookie.service.mail!="0"&&(this.appid=="1000"||this.appid=="1014"||this.appid=="1037")){if(this.domain.indexOf(this.cookie.service.mail)==-1){this.drawLoginForm()}else{PassportSC.gotohref(this.loginRedirectUrl)}}else{if(document.location.href==this.loginRedirectUrl){document.location.reload()}else{PassportSC.gotohref(this.loginRedirectUrl)}}}else{this.getBottomRow();this.drawPassportCard();for(i=0;i<PassportCardList.length;i++){if(i==this.curCardIndex){continue}PassportCardList[i].parsePassportCookie();PassportCardList[i].getBottomRow();PassportCardList[i].drawPassportCard()}}}else{this.drawLoginForm();this.reportMsg("7")}},doLogout:function(){if(this.eInterval){return}this.intervalCount=0;this.sElement.innerHTML="";if(this.usePost==1){window.location="http://passport.sohu.com/sso/logout_js.jsp?s="+this.getTime()+"&ru="+this.postru}else{this.logoutHandle(this.sElement,this.logoutFailCall.bindFunc(this),this.logoutSuccessCall.bindFunc(this,"dd"))}},logoutFailCall:function(){this.sElement.innerHTML="";this.reportMsg("8")},logoutSuccessCall:function(b){this.parseLastDomain(this.domainList);this.cookie=false;this.drawLoginForm();for(i=0;i<PassportCardList.length;i++){if(i==this.curCardIndex){continue}PassportCardList[i].drawLoginForm()}try{logoutApp()}catch(a){}},renewCookie:function(c,g,d){if(typeof(c)!="object"){return false}if(this.domain==""){this.domain=this.getDomain()}var b=this.getTime();var e="http://passport.sohu.com/sso/renew.jsp?s="+b;if(this.domain!="sohu.com"){e+="&domain="+this.domain}var f=document.createElement("script");f.src=e;c.appendChild(f);var a=this;this.eInterval=setInterval(function(){a.renewIntervalProc(g,d,c)},100);return false},renewIntervalProc:function(a,d,c){if(renew_status==""&&this.intervalCount<this.maxIntervalCount){this.intervalCount++;return}clearInterval(this.eInterval);this.eInterval=false;if(renew_status!="success"||this.intervalCount>=this.maxIntervalCount){try{a()}catch(b){}return}this.autoProcAllDomain("renew",c);try{d()}catch(b){}},autoProcAllDomain:function(b,c){var a=this.crossDomainIframeUrl(b);if(a){var d=document.createElement("iframe");d.src=a;d.style.width="0";d.style.height="0";c.appendChild(d)}},doCrossDomainCookie:function(b,c){if(typeof(b)!="object"){return}var f="crossdomain";if(c=="logout"){f="crossdomain_logout"}var e=this.getCookie(f);if(e==""||e=="0"){return}if(this.domain==""){this.domain=this.getDomain()}var a=this.crossDomainIframeUrl(c);if(a){var d=document.createElement("iframe");d.src=a;d.style.width="0";d.style.height="0";b.appendChild(d);this.deleteCookie(f)}},crossDomainUrl:function(c,d){var b=this.getTime();var a="http://passport.sohu.com/sso/crossdomain.jsp?s="+b+"&action="+c+"&domain="+d;return a},crossDomainIframeUrl:function(b){var a="http://"+this.getPassportDomain()+"/sso/crossdomain_all.jsp?action="+b;return a},setDomainCookie:function(b,c,d,f){login_status="";crossdomain_status="";var e=this.crossDomainUrl("login",c);if(e){newScript=document.createElement("script");newScript.src=e;b.appendChild(newScript)}var a=this;this.eInterval=setInterval(function(){a.setCookieIntervalProc(b,d,f)},100)},setCookieIntervalProc:function(b,c,a){if(crossdomain_status!=""){clearInterval(this.eInterval);this.eInterval=false;a();return}if(login_status==""&&this.intervalCount<this.maxIntervalCount){this.intervalCount++;return}clearInterval(this.eInterval);this.eInterval=false;if(login_status!="success"||this.intervalCount>=this.maxIntervalCount){a();return}c()},downDSindex:function(){if(this.dsAnchor.firstChild==null){return}var a=this.dsAnchor.firstChild.rows;var b=0;for(;b<a.length;b++){if(a[b].firstChild.idx==this.curDSindex){break}}if(b>=a.length-1){this.curDSindex=a[0].firstChild.idx}else{this.curDSindex=a[b+1].firstChild.idx}},upDSindex:function(){if(this.dsAnchor.firstChild==null){return}var a=this.dsAnchor.firstChild.rows;var b=-1;var c=0;for(;c<a.length;c++){if(a[c].firstChild.idx==this.curDSindex){break}b=a[c].firstChild.idx}if(c==a.length){this.curDSindex=a[0].firstChild.idx}else{if(b==-1){this.curDSindex=a[a.length-1].firstChild.idx}else{this.curDSindex=b}}},findDSindex:function(d){try{var a=this.dsAnchor.firstChild.rows;for(var c=0;c<a.length;c++){if(a[c].firstChild.idx==d){return a[c].firstChild}}}catch(b){}return false},clearFocus:function(c){if(typeof(c)!="number"){c=this.curDSindex}try{var a=this.findDSindex(c);a.className="";a.style.fontWeight="normal"}catch(b){}},setFocus:function(c){if(typeof(c)!="number"){c=this.curDSindex}try{var a=this.findDSindex(c);a.className="active"}catch(b){}},fillEmailSelect:function(){var c=this.emailInput.value;var h=/^[\u4e00-\u9fa5,a-zA-Z0-9-_.@]{1,100}$/;if(c==""||!h.test(c)){this.dsElement.style.display="none";return}var b="";var v="";var g=c.lastIndexOf("@");if(g<0){v=c}else{if(g==c.length-1){v=c.substr(0,g)}else{v=c.substr(0,g);b=c.substr(g+1)}}var m=this.getPosition(this.emailInput,"offsetLeft")-this.getPosition(this.cElement,"offsetLeft");if(document.all&&!document.addEventListener){m+=1}this.dsElement.style.marginLeft=m+"px";this.dsElement.style.marginTop=(this.getPosition(this.emailInput,"offsetTop")-this.getPosition(this.cElement,"offsetTop")+this.emailInput.offsetHeight)+"px";this.dsElement.style.zIndex="2000";this.dsElement.style.paddingRight="0";this.dsElement.style.paddingLeft="0";this.dsElement.style.paddingTop="0";this.dsElement.style.paddingBottom="0";this.dsElement.style.backgroundColor="white";this.dsElement.style.display="block";var n=document.createElement("TABLE");n.width="100%";n.cellSpacing=0;n.cellPadding=3;var u=document.createElement("TBODY");n.appendChild(u);var f=0;var s=false;var l=false;var a=-1;var k="",r="";var p=this.emailPostfix;var d=/^1.*$/;if(d.test(c)){if(this.autopad!=""){p=["mobile","qq.com","focus.cn",this.autopad]}else{p=["mobile","qq.com","focus.cn"]}}for(var e=0;e<p.length;e++){var q=p[e];if(typeof(q)!="string"){continue}if(b!=""){if(q.lastIndexOf(b)!=0){continue}}if(q.lastIndexOf("@")>0){tmp_pos=q.lastIndexOf("@");if(this.autopad!=""&&this.autopad.lastIndexOf(q.substring(tmp_pos+1))<0){continue}r=q.substring(0,tmp_pos);if(r.lastIndexOf(v)!=0){continue}if(r==v){k=q.substring(q.lastIndexOf("@")+1)}l=true}else{if(this.autopad!=""&&this.autopad.lastIndexOf(q)<0){continue}}if(q==k){continue}f++;if(a==-1){a=e}if(this.curDSindex==e){s=true}var t=document.createElement("TR");var o=document.createElement("TD");o.nowrap="true";o.align="left";if(q=="mobile"){o.innerHTML=v}else{if(l==false){if(this.usePostFix){o.innerHTML=v+"@"+q}else{o.innerHTML=v}}else{if(this.usePostFix){o.innerHTML=q}else{o.innerHTML=q.substring(0,q.lastIndexOf("@"))}}}o.id="email_postfix_"+e;o.idx=e;var j=this;o.onmouseover=function(){j.clearFocus();j.curDSindex=this.idx;j.setFocus();this.style.cursor="hand"};o.onclick=function(){j.doSelect()};t.appendChild(o);u.appendChild(t);l=false}if(f>0){this.dsAnchor.innerHTML="";this.dsAnchor.appendChild(n);if(s==false){this.curDSindex=a}this.setFocus()}else{this.dsElement.style.display="none";this.curDSindex=-1}},doSelect:function(){this.dsElement.style.display="none";var a=this.findDSindex(this.curDSindex);if(a){var b=a.innerHTML;if(b){this.emailInput.value=b.replace(/&amp;/g,"&")}}if(this.emailInput.value!=""){this.passwdInput.focus()}},checkKeyDown:function(a){a=a||window.event;var b=a.keyCode||a.which||a.charCode;if(b==38||b==40){if(a.shiftKey==1){return}this.clearFocus();if(b==38){this.upDSindex()}else{if(b==40){this.downDSindex()}}this.setFocus()}},checkKeyPress:function(c){c=c||window.event;var b=c.keyCode||c.which||c.charCode;if(b==13){this.preventEvent(c)}else{if(b==38||b==40){if(c.shiftKey==1){return}this.preventEvent(c);this.clearFocus();if(b==38){this.upDSindex()}else{if(b==40){this.downDSindex()}}this.setFocus()}else{if(b==108||b==110||b==111||b==115){var a=this;setTimeout(function(){a.fillEmailSelect()},10)}}}},checkKeyUp:function(a){a=a||window.event;var b=a.keyCode||a.which||a.charCode;this.fillEmailSelect();if(b==13){this.doSelect()}if(getBrowserType()==7||getBrowserType()==4){if(b==38||b==40){if(a.shiftKey==1){return}this.clearFocus();if(b==38){this.upDSindex()}else{if(b==40){this.downDSindex()}}this.setFocus()}}},init:function(a){this.rootElement=a;this.rootElement.innerHTML='<div class="ppselecter" style="position: absolute; display: none;"><table width="100%" cellspacing="0" cellpadding="0"><tbody><tr><td style="" class="ppseltit" id="ppseltitId">'+this.selectorTitle+'</td></tr><tr><td height="2" /></tr><tr><td /></tr></tbody></table></div><div style="display: none;"></div><div class="passportc"></div>';if(this.selectorTitle==null||this.selectorTitle.length==0){this.rootElement.innerHTML='<div class="ppselecter" style="position: absolute; display: none;"><table width="100%" cellspacing="0" cellpadding="0"><tbody><tr></tr><tr><td height="0" /></tr><tr><td /></tr></tbody></table></div><div style="display: none;"></div><div class="passportc"></div>'}this.dsElement=this.rootElement.childNodes[0];this.sElement=this.rootElement.childNodes[1];this.cElement=this.rootElement.childNodes[2];this.dsAnchor=this.dsElement.firstChild.rows[2].firstChild;this.domain=this.getDomain();this.parseLastDomain(this.domainList);this.parseAppid();this.parsePassportCookie();this.getBottomRow();if(this.postru==""){this.postru=document.location.href}},_drawPassportCard:function(){},drawPassportCard:function(){this._drawPassportCard();var b=document.getElementById("ppcontid");b.onclick=this.doClickLink.bindFunc(this);this.$iElement();try{if(this.iElement!=null){this.successCalledFunc(this.iElement)}else{try{this.drawPassportInfo()}catch(a){}}}catch(a){this.drawPassportInfo()}},doClickLink:function(a){var b=window.event?window.event:a;var c=b.srcElement||b.target;var f=c.tagName.toLowerCase();var h=this.cookie.userid;var d=document.location.href;var e="";if(f=="img"){f=c.parentNode.tagName.toLowerCase();c=c.parentNode}if(f=="a"){var g=document.createElement("script");g.src="http://passport.sohu.com/web/golog.jsp?userid="+h+"&fappid="+this.appid+"&furl="+d+"&turl="+c;this.iElement.appendChild(g)}},$iElement:function(){this.iElement=this.$getElementByClassName("listContA")},$getElementByClassName:function(c){var a=this.cElement.getElementsByTagName("div");for(var b=0;b<a.length;b++){if(a[b].className.lastIndexOf(c)==0){return a[b]}}},drawPassportWait:function(a){},drawPassportInfo:function(){},getRanServ:function(){var b=this.recomServ.length;if(b==0){return""}var d=Math.floor(b*(Math.random()));var c='<a href="'+this.recomServ[d]["url"]+'" target="_blank">'+this.recomServ[d]["name"]+"</a>";if(b==1){return c}var a=Math.floor(b*(Math.random()));while(d==a){a=Math.floor(b*(Math.random()))}c+=' | <a href="'+this.recomServ[a]["url"]+'" target="_blank">'+this.recomServ[a]["name"]+"</a>";return c},_drawLoginForm:function(){},drawLoginForm:function(){this._drawLoginForm();var a=this.cElement.getElementsByTagName("input");for(var b=0;b<a.length;b++){if(a[b].name=="email"){this.emailInput=a[b]}if(a[b].name=="password"){this.passwdInput=a[b]}if(a[b].name=="persistentcookie"){this.pcInput=a[b]}}this.loginMsg=this.$getElementByClassName("error");if(this.isShowRemPwdMsg==1){var c=this;this.pcInput.onclick=function(){if(c.pcInput.checked==false){return}var d=window.confirm("浏览器将在两周内保持通行证的登录状态，网吧或公共机房上网者请慎用。您能确认本次操作吗？");if(d==false){c.pcInput.checked=false}}}this.bindSelector();this.autoFillUserId();var c=this;if(this.emailInput.value==""){if(this.isSetFocus){setTimeout(function(){c.emailInput.focus()},50)}}else{if(this.isSetFocus&&this.emailInput.value!="通行证帐号/手机号"){setTimeout(function(){c.passwdInput.focus()},50)}}},autoFillUserId:function(){if(this.showEmailInputTip){this.showEmailInputTip=false;return}var b=this.getCookie("pptmpuserid");if(this.email.length>0){this.emailInput.value=this.email}else{this.emailInput.value=b}if(b.length>0){var a=this;setTimeout(function(){a.deleteCookie("pptmpuserid")},1000)}},bindSelector:function(){if(this.bindDomainSelector){this.curDSindex=-1;try{this.emailInput.addEventListener("mousedown",this.checkMousedown.bindFunc(this),false);this.emailInput.addEventListener("keypress",this.checkKeyPress.bindFunc(this),false);this.emailInput.addEventListener("keyup",this.checkKeyUp.bindFunc(this),false);this.emailInput.addEventListener("blur",this.doSelect.bindFunc(this),false)}catch(a){try{this.emailInput.attachEvent("onmousedown",this.checkMousedown.bindFunc(this));this.emailInput.attachEvent("onkeydown",this.checkKeyDown.bindFunc(this));this.emailInput.attachEvent("onkeypress",this.checkKeyPress.bindFunc(this));this.emailInput.attachEvent("onkeyup",this.checkKeyUp.bindFunc(this));this.emailInput.attachEvent("onblur",this.doSelect.bindFunc(this))}catch(a){}}}},checkMousedown:function(){if(this.emailInput.value=="通行证帐号/手机号"){this.emailInput.value="";this.emailInput.style.color="black";this.emailInput.focus();return}},drawPassport:function(element){if(typeof(element)!="object"){return}if(PassportCardList.length==0){PassportCardList[0]=this}if(!this.successCalledFunc){try{this.successCalledFunc=eval("drawAppInfo")}catch(e){this.successCalledFunc=this.drawPassportInfo}}this.init(element);if(this.cookie&&(this.cookie.userid!=""||this.relationHandle()!="")){if(this.autopad!=""){var userid=this.relationHandle()!=""?this.relationHandle():this.cookie.userid;var at=userid.lastIndexOf("@");if(at>0){if(this.autopad.lastIndexOf(userid.substr(at+1))<0){this.drawLoginForm();return}}}if(this.autoRedirectUrl!=""){PassportSC.gotohref(this.autoRedirectUrl)}else{this.drawPassportCard()}}else{this.drawLoginForm()}},drawPassportNew:function(a,e,c){if(typeof(a)!="object"){return}var f=new Function();f.prototype=this;var b=PassportCardList.length;var d=new f();d.successCalledFunc=c;d.appid=e;d.curCardIndex=b;d.isSetFocus=false;PassportCardList[b]=d;drawPassportNewInit(b,a);return},drawPassportJS:function(){if(!this.oElement||typeof(this.oElement)!="object"){return}var a=this.getCookie("ppinf");var b="http://sso.passport.sohu.com/mirror/"+this.getPassportDomain()+"/"+a;var c=document.createElement("script");c.src=b;ele.appendChild(c)},doCrossDomainIframe:function(b){var a=document.createElement("iframe");a.src=b;a.style.width="0";a.style.height="0";a.id="ifr_crossdomain";PassportSC.oElement.appendChild(a)}};if(typeof(PP_SETCROSSDOMAIN)=="undefined"){var ele=document.getElementsByTagName("head")[0];PassportSC.doCrossDomainCookie(ele,"login");PassportSC.doCrossDomainCookie(ele,"logout")}if(typeof encodeURIComponent=="undefined"){PassportSC.usePost=1}if(getBrowserType()==3&&(screen.height==5000||window.navigator.userAgent.lastIndexOf("Mini")>=0)){PassportSC.usePost=1}window.PassportSC=PassportSC;if(PassportSC.onApiLoaded&&typeof PassportSC.onApiLoaded=="function"){PassportSC.onApiLoaded()};