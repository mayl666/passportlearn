define("ui",[],function(){return{checkbox:function(c){c=$(c);var d=c.data("target");if(!d){return}d=$("#"+d);var b="checkbox-checked";function a(f){if(f){c.prop("checked",c.prop("checked")?null:true)}var e=c.prop("checked");e?d.addClass(b):d.removeClass(b)}c.click(function(){a()});d.click(function(){a(1)})}}});define("utils",[],function(){return{uuid:function(){function s4(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return s4()+s4()+s4()+s4()+s4()+s4()+s4()+s4()},addZero:function(num,len){num=num.toString();while(num.length<len){num="0"+num}return num},parseResponse:function(data){if(typeof data=="string"){try{data=eval("("+data+")")}catch(e){data={status:-1,statusText:"服务器故障"}}}return data},addIframe:function(url,callback){var iframe=document.createElement("iframe");iframe.src=url;if(iframe.attachEvent){iframe.attachEvent("onload",function(){callback&&callback()})}else{iframe.onload=function(){callback&&callback()}}document.body.appendChild(iframe)},getScript:function(url,callback){var script=document.createElement("script");var head=document.head;script.async=true;script.src=url;script.onload=script.onreadystatechange=function(_,isAbort){if(isAbort||!script.readyState||/loaded|complete/.test(script.readyState)){script.onload=script.onreadystatechange=null;if(script.parentNode){script.parentNode.removeChild(script)}script=null;if(!isAbort){callback()}}};head.insertBefore(script,head.firstChild)},getUrlByMail:function(mail){mail=mail.split("@")[1];if(!mail){return false}var hash={"139.com":"mail.10086.cn","gmail.com":"mail.google.com","sina.com":"mail.sina.com.cn","yeah.net":"www.yeah.net","hotmail.com":"www.hotmail.com","live.com":"www.outlook.com","live.cn":"www.outlook.com","live.com.cn":"www.outlook.com","outlook.com":"www.outlook.com","yahoo.com.cn":"mail.cn.yahoo.com","yahoo.cn":"mail.cn.yahoo.com","ymail.com":"www.ymail.com","eyou.com":"www.eyou.com","188.com":"www.188.com","foxmail.com":"www.foxmail.com"};var url;if(mail in hash){url=hash[mail]}else{url="mail."+mail}return"http://"+url}}});define("conf",[],function(){return{client_id:"1120",redirectUrl:"/static/api/jump.htm",thirdRedirectUrl:"/static/api/tj.htm"}});define("index",["./ui","./utils","./conf"],function(h,i,d){var g=false;var j=function(){var k=$("#Login");k.parent().parent().addClass("login-vcode");if(g){return}g=true;k.find(".vcode img,.vcode a").click(function(){b();return false});b(k);return true};var a=function(){var k=$("#Login");k.parent().parent().removeClass("login-vcode")};var c={renren:[880,620],sina:[780,640],qq:[500,300]};var b=function(){if(g){$("#Login").find(".vcode img").attr("src","/captcha?token="+PassportSC.getToken()+"&t="+ +new Date())}};var e=function(k){$("#Login .vcode-error .text").html(k).parent().show()};var f=function(k){$("#Login .uname-error .text").html(k).parent().show()};return{init:function(){h.checkbox("#RemChb");if($.cookie("fe_uname")){$("#Login .username input").val($.trim($.cookie("fe_uname")));$("#Login .username span").hide()}PassportSC.appid=d.client_id;PassportSC.redirectUrl=location.protocol+"//"+location.hostname+(location.port?(":"+location.port):"")+d.redirectUrl;$("#Login").on("submit",function(){var m=$("#Login");var l=m.find('input[name="password"]').val();if(!$.trim(m.find('input[name="username"]').val())||!l){f("请输入用户名密码");return false}if(l.length>16||l.length<6){f("用户名密码输入错误");return false}if($("#Login").parent().parent().hasClass("login-vcode")&&!$.trim(m.find('input[name="captcha"]').val())){e("请输入验证码");m.find('input[name="captcha"]').focus();return false}PassportSC.loginHandle(m.find('input[name="username"]').val(),m.find('input[name="password"]').val(),m.find('input[name="captcha"]').val(),m.find('input[name="autoLogin"]').prop("checked")?1:0,document.getElementById("logdiv"),function(o){var n=false;var p=m.find("input[name=captcha]");if(+o.needcaptcha){if(j()){n=true}$("#Login").parent().parent().addClass("login-vcode")}if(+o.status==20221){var q=p.val()?"验证码错误":"请输入验证码";e(q);!n&&b();p.focus()}else{if(+o.status==20230){f("未知错误");!n&&b()}else{f("用户名或密码错，请重新输入");!n&&b()}}},function(){$.cookie("fe_uname",$("#Login .username input").val(),{path:"/",expires:365});var n={};try{n=$.evalJSON(server_data).data}catch(o){window.console&&console.log(o)}if(n&&n.ru){location.href=n.ru}else{location.href="https://"+location.hostname}return});return false});$(document.body).click(function(){$("#Login .error").hide()});$("#Login .error a").click(function(){$("#Login .error").hide();return false});$(".login .third-login a").each(function(l,m){$(m).attr("href","https://account.sogou.com/connect/login?provider="+$(m).html()+"&client_id="+d.client_id+"&ru="+encodeURIComponent(location.href))});$("#Login .username input").change(function(){if(!$.trim($(this).val())){return}$.get("/web/login/checkNeedCaptcha",{username:$.trim($(this).val()),client_id:d.client_id},function(l){l=i.parseResponse(l);if(l.data.needCaptcha){j()}else{a()}})});var k=$("#Login .password input , #Login .username input , #Login .vcode input");k.focus(function(){$(this).prev().hide();$(this).parent().find("b").show()}).blur(function(){$(this).parent().find("b").hide();if(!$.trim($(this).val())){$(this).prev().show()}});k.parent().click(function(){$(this).find("input").focus()});window.onload=function(){k.each(function(l,m){if($(m).val()){$(m).prev().hide()}})}}}});