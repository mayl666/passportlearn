<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sogou.upd.passport.dao.account.AccountAuthMapper">
    <resultMap id="accountAuthMap" type="accountAuth">
        <id property="id" column="id"></id>
        <id property="userId" column="user_id"></id>
        <id property="accessToken" column="access_token"></id>
        <id property="refreshToken" column="refresh_token"></id>
        <id property="accessValidTime" column="access_valid_time"></id>
        <id property="refreshValidTime" column="refresh_valid_time"></id>
        <id property="appkey" column="appkey"></id>
    </resultMap>

    <insert id="saveAccountAuth" parameterType="accountAuth">
        <selectKey resultType="java.lang.Integer" keyProperty="id" order="AFTER">
            SELECT @@IDENTITY
        </selectKey>
        insert into account_auth(user_id,access_token,refresh_token,access_valid_time,refresh_valid_time,appkey) values
        (#{userId},#{accessToken},#{refreshToken},#{accessValidTime},#{refreshValidTime},#{appkey})
    </insert>

    <update id="updateAccountAuth" parameterType="accountAuth">
        update account_auth
        <set>
            <if test="accessToken != null">access_token=#{accessToken},</if>
            <if test="refreshToken != null">refresh_token=#{refreshToken},</if>
            <if test="accessValidTime != null">access_valid_time=#{accessValidTime},</if>
            <if test="refreshValidTime != null">refresh_valid_time=#{refreshValidTime}</if>
        </set>
        where
        id=#{id}
    </update>

</mapper>